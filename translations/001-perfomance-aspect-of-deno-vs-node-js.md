# Performance aspect of Deno vs. Node

<div style="text-align: right;">
<p>Original Publication dateï¼š 2020-06-19</p>
<p>Publication dateï¼š 2020-07-24</p><br>
</div>

## ã“ã®è¨˜äº‹ã«é–¢ã—ã¦
[Performance aspect of Deno vs. Node](https://dev.to/gjuoun/perfomance-aspect-of-deno-vs-node-js-4dke)ã‚’ç¿»è¨³ã—ã¦ã„ã¾ã™ã€‚

## Denoå¯¾Nodeã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«ã¤ã„ã¦
ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ã„ã“ã¨ã¯ã€ç´ æ™´ã‚‰ã—ã„ã“ã¨ã§ã™ã€‚  
æ•°æ—¥å‰ã€Craig Mortenã®æŠ•ç¨¿[What Is The Best Deno Web Framework?](https://dev.to/craigmorten/what-is-the-best-deno-web-framework-2k69)ã€ŒDenoã®Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§æœ€é©ãªã‚‚ã®ã¯ä½•ã‹ï¼Ÿã€ã‚’èª­ã¿ã¾ã—ãŸã€‚ã™ã¹ã¦ã®Denoãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®æ¦‚è¦ã‚’ç¤ºã—ã€ãã‚Œã‚‰ã®ã™ã¹ã¦ã®å´é¢ã‚’æ¯”è¼ƒã—ã¾ã™ã€‚ã‚ãªãŸãŒãã‚Œã«ã¤ã„ã¦èª­ã‚“ã§ã„ãªã„ãªã‚‰ã€ç§ã¯ã‚ãªãŸãŒãã†ã™ã‚‹ã“ã¨ã‚’å¼·ãå‹§ã‚ã¾ã™ã€‚  

ã‚¯ãƒ¬ã‚¤ã‚°ã®æŠ•ç¨¿ã«ã‚ˆã‚‹ã¨ã€ã€Œãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã¯é­…åŠ›çš„ã§ã™ã€‚å½¼ã®ç’°å¢ƒã§ã¯ã€Deno HTTPãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯Node HTTPãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã»ã¨ã‚“ã©åŒã˜ï¼ˆã•ã‚‰ã«ã¯ãã‚Œä»¥ä¸Šï¼‰ã¨ã„ã†çµæœã§ã—ãŸã€‚ã“ã‚Œã¯å˜ãªã‚‹ "Hello Denoï¼"ã‚’è©¦ã™ã ã‘ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆã§ã™ãŒã€ã“ã®çµæœã«é©šãã¾ã—ãŸã€‚  

~~ã—ã‹ã—ã€ç§ã¯ãã‚ŒãŒã»ã¨ã‚“ã©ã®å ´åˆã«å½“ã¦ã¯ã¾ã‚‰ãªã„ã“ã¨ã‚’çŸ¥ã£ã¦ã„ã¾ã—ãŸã€‚ãªãœãªã‚‰Deno HTTPãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯Typescriptã§è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚å‹ãƒã‚§ãƒƒã‚¯ã¯é–‹ç™ºã®æ¥½ã—ã•ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ãŒã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ãƒ¼æ™‚é–“ã«ã‚ˆã‚Šå¤šãã®ãƒªã‚½ãƒ¼ã‚¹ãŒã‹ã‹ã‚‹ãŸã‚ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«æ‚ªå½±éŸ¿ã‚’åŠã¼ã—ã¾ã™ã€‚~~
ï¼ˆOghenovo Usiwomaã¨Jonathan Beaumont ãŒã‚³ãƒ¡ãƒ³ãƒˆã§[æŒ‡æ‘˜](https://dev.to/eunovo/comment/10hn2)ã—ã¦ãã‚Œã¦ã‚ã‚ŠãŒã¨ã†ï¼‰

ã—ã‹ã—ã€ç§ã¯ä»¥å‰ã«ãã‚Œã‚’ãƒ†ã‚¹ãƒˆã—ãŸã“ã¨ãŒã‚ã‚Šã€å½¼ã¨åŒã˜çµæœã‚’å¾—ãŸã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã‚ˆã‚Šå¼·åŠ›ãªãƒã‚·ãƒ³ã§ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã©ã†ãªã‚‹ã‹ã‚’ç¢ºèªã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚

- ç’°å¢ƒï¼š
  - CPUï¼ši5-9600KF @ 3.7GHz
  - RAMï¼š16GB DDR4 2133MHz
  - OSï¼šWindows 10
  - ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãƒ„ãƒ¼ãƒ«ï¼š [autocannon](https://github.com/mcollina/autocannon)

- ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼š
  - "Hello World!" [deno server](https://github.com/deligenius/deligenius/blob/master/benchmark/deno.http.tsv)
  - "Hello World!" [node server](https://github.com/deligenius/deligenius/blob/master/benchmark/node.http.js)
æœ€åˆã«çµæœã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ï¼š

### 100åŒæ™‚æ¥ç¶š
|åå‰	|ãƒãƒ¼ã‚¸ãƒ§ãƒ³	|AVGãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ç§’|
|-|-|-|
|node.http	|12.16.3	|47969.2|
|deno.http	|1.0.0	|47376|
|deno.http	|1.1.0	|46953.7|
|node.http	|14.2.0	|44409|
ãªã‚“ã¨ï¼å…¨ä½“çš„ã«Denoã¯Nodeã‚’å„ªã£ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã¾ã™ï¼ï¼ˆå°‘ãªãã¨ã‚‚Nodeãƒãƒ¼ã‚¸ãƒ§ãƒ³14.2.0ã®å ´åˆï¼‰ã€‚  

ãŸã ã—ã€ã“ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã¯ã€100ã®åŒæ™‚æ¥ç¶šæ•°ã«åŸºã¥ã„ã¦`autocannon http://localhost:3000/ -c100`ã®ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã—ã¦ã„ã‚‹ãŸã‚ã€ä¸­å°è¦æ¨¡ã®ã‚µãƒ¼ãƒãƒ¼ã«ã¯å¤šã™ãã¾ã™ã€‚ãã“ã§ã€ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ã¿ã¾ã™ã€‚ä»Šå›`-c10`ã¯ã€10ã®åŒæ™‚æ¥ç¶šã§è¦æ±‚ã‚’é€ä¿¡ã—ç¶šã‘ã‚‹ã¦ã¿ã¾ã™ã€‚  

### 10åŒæ™‚æ¥ç¶š
|åå‰	|ãƒãƒ¼ã‚¸ãƒ§ãƒ³|	AVGãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ç§’|
|-|-|-|
|node.http	|12.16.3	|49926.69|
|node.http	|14.2.0	|45345.33|
|deno.http	|1.1.0	|34806.79|
|deno.http	|1.0.0	|34742.37|
ä»Šå›ã¯ã€Nodeã®å‹åˆ©ã§ã™ã€‚2ã¤ã®é–“ã«ã¯å¤§ããªé•ã„ãŒã‚ã‚Šã€ãƒãƒ¼ãƒ‰ã¯ãƒ‡ãƒã‚ˆã‚Šã‚‚æ¯ç§’ç´„10Kã‚’è¶…ãˆã‚‹ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŒã£ã¦ã„ã¾ã™ã€‚  

ã—ã‹ã—ã€ã“ã‚Œã¯æ–°ã—ã„è³ªå•ã‚’ã‚‚ãŸã‚‰ã—ã¾ã™ï¼š

### åŒæ™‚æ¥ç¶šæ•°ãŒé‡è¦ãªã®ã¯ãªãœã§ã™ã‹ï¼Ÿ
åŒæ™‚æ¥ç¶šã¨ã¯ã€[åˆ¥ã®æ¥ç¶šã¨åŒæ™‚ã«ç™ºç”Ÿã™ã‚‹æ¥ç¶š](https://blog.litespeedtech.com/2013/04/26/concurrent-connections-demystified/#:~:text=A%20concurrent%20connection%20is%20a,mean%20the%20exact%20same%20time.)ã®ã“ã¨ã§ã™ã€‚  
ã‚ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒHTMLãƒšãƒ¼ã‚¸ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã€5ãƒŸãƒªç§’å¾Œã«ã€  
åˆ¥ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒcssãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ãŸã¨ã—ã¾ã™ã€‚  
ã—ã‹ã—ã“ã‚Œã¯åŒæ™‚æ¥ç¶šã¨ã¯è¦‹ãªã•ã‚Œã¾ã›ã‚“ã€‚

## åŒæ™‚æ¥ç¶šæ•°ã‚’è¨ˆç®—ã™ã‚‹æ–¹æ³•
ä¾‹ãˆã°ã€ã‚¢ãƒ—ãƒªã«100äººã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã„ã‚‹ã¨ã—ã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’1æ™‚é–“è¿½è·¡ã—ã€å„ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ1æ™‚é–“ã«60å›ã®ã‚¯ãƒªãƒƒã‚¯ã‚’è¡Œã£ã¦ã„ã‚‹ã“ã¨ã‚’åˆ†ã‹ã£ãŸã¨ã—ã¾ã™ã€‚ã“ã‚Œã¯ã‚µãƒ¼ãƒãƒ¼ã§ã®åˆè¨ˆãƒªã‚¯ã‚¨ã‚¹ãƒˆæ•°ãŒ6000ã§ã‚ã‚Šã€å„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã¯å¹³å‡ã§2ç§’ã‹ã‹ã‚‹ã¨ã—ã¾ã™ï¼ˆã“ã‚Œã¯éå¸¸ã«ä½é€Ÿã§ã™ï¼‰ã€‚ã“ã‚Œã¯ã€3600ç§’ï¼ˆ1æ™‚é–“ï¼‰ã§ã€12000ç§’ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªæ¥ç¶šã§ã‚ã‚Šã€**åŒæ™‚æ¥ç¶šæ•°ã¯3.33**ã«ãªã‚Šã¾ã™ï¼ˆ12000/3600 = 3.33ï¼‰ã€‚  

- Q. ã‚‚ã—ã‚µãƒ¼ãƒãƒ¼ãŒ1ç§’ä»¥å†…ã«å„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã§ãã‚‹ã»ã©å¼·åŠ›ãªå ´åˆã¯ã©ã†ã§ã—ã‚‡ã†?
- A. åŒæ™‚æ•°ã¯ã•ã‚‰ã«å°‘ãªãã—ã¦ã€1.7æœªæº€ã§ã™ã€‚

- Q. 1000äººã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã©ã†ã§ã™ã‹ï¼Ÿ
- A. åŒæ™‚æ¥ç¶šæ•°ã¯33.3

- Q. 100ã®åŒæ™‚æ¥ç¶šã¯ã‚„ã‚Šã™ãã§ã¯ï¼Ÿ  
- A. ãã®ã¨ãŠã‚Šï¼3000äººä»¥ä¸Šã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã‚µãƒ¼ãƒ“ã‚¹ã‚’æä¾›ã™ã‚‹ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºãƒ¬ãƒ™ãƒ«ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹å ´åˆã‚’é™¤ãã¾ã™ã€‚ï¼ˆä¸Šè¨˜ã®ã‚·ãƒŠãƒªã‚ªã«ãŠã„ã¦ã¯ï¼‰

### Nodeã¾ãŸã¯Denoã€ã©ã¡ã‚‰ã®æ–¹ãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ã„ã‹æ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ï¼Ÿ
ãã†ã¯è¨€ã£ã¦ã‚‚ã€**10å€‹ã®åŒæ™‚æ¥ç¶šã®çµæœã¯å®Ÿéš›ã«ã¯ã‚ˆã‚Šæ„å‘³ãŒã‚ã‚Šã€Nodeã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ©ã‚¦ãƒ³ãƒ‰ã§å‹åˆ©ã—ã¾ã™ã€‚**  

`-c100`ã®ãƒ†ã‚¹ãƒˆã§ã¯Denoã®æ–¹ãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå„ªã‚Œã¦ã„ã¾ã™ãŒã€ã“ã‚Œã¯ã€ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯é‡ã®å¤šã„ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®å ´åˆã§ã‚ã‚Šã€Nodeã‚ˆã‚Šã‚‚Denoã®æ–¹ãŒå„ªã‚Œã¦ã„ã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¦ã„ã¾ã™ã€‚ãã‚Œã¯ç´ æ™´ã‚‰ã—ã„ã“ã¨ã§ã™ã€‚ç§ãŒè¦‹ã¦ããŸã“ã¨ã‹ã‚‰ã€Denoã¯ã¾ã è‹¥ãã€ç¾æ™‚ç‚¹ã§ã¯ã¾ã æœ¬ç•ªç’°å¢ƒã«å¯¾å¿œã—ã¦ã„ãªã„ãŸã‚ã€ä¼æ¥­ã¯ãƒ‡ãƒã‚ˆã‚Šã‚‚å¤§é‡ã®ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯ã‚’å‡¦ç†ã™ã‚‹ãŸã‚ã«Javaã¾ãŸã¯ä»–ã®ã‚ˆãçŸ¥ã‚‰ã‚ŒãŸå®Ÿç¸¾ã®ã‚ã‚‹è¨€èªã‚’å¥½ã‚€ã§ã—ã‚‡ã†ã€‚ã—ã‹ã—ã€Denoã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã®èª°ã‚‚ãŒãã‚Œã‚’å®Ÿç¾ã•ã›ã¦ã„ã¾ã™ğŸ”¥ã€‚  

æœ€å¾Œã«ä¸€ç‚¹ç”³ã—ä¸Šã’ãŸã„ã¨æ€ã„ã¾ã™ã€‚é–‹ç™ºã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«ã¨ã£ã¦ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯æˆåŠŸã®éµã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚Pythonã¨PHPã‚’è¦‹ã¦ãã ã•ã„ã€‚ãã‚Œã‚‰ã¯Nodeã¨Deno ã‚ˆã‚Šã‚‚ã‹ãªã‚Šé…ãå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ãªãœã€ãã‚Œã‚‰ã¯äººæ°—ãªã®ã§ã—ã‚‡ã†ã‹ï¼Ÿãã®ç†ç”±ã¯ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã¨äººã§ã™ï¼

### è¿½åŠ ãƒˆãƒ”ãƒƒã‚¯
[GoogleãŒ1ç§’ã‚ãŸã‚Š75,000ä»¥ä¸Šã®ã‚¯ã‚¨ãƒªã‚’å‡¦ç†ã™ã‚‹](https://99firms.com/blog/google-search-statistics/)ã“ã¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚
ã‚µãƒ¼ãƒãƒ¼ã¯ã€1ç§’ã‚ãŸã‚Šã“ã®é‡ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆ> 40Kï¼‰ã‚’å‡¦ç†ã§ãã¾ã™ã‹ï¼Ÿ
